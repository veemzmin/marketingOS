---
phase: 03-content-creation
plan: 04
type: execute
wave: 1
depends_on: []
files_modified: [src/components/content/ContentEditor.tsx]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Save indicator appears when user enters valid title (5+ chars) and starts typing body"
    - "Success message visible when submitting content before navigation occurs"
  artifacts:
    - path: "src/components/content/ContentEditor.tsx"
      provides: "Auto-save state management without 50-char guard"
      contains: "setSaveState"
    - path: "src/components/content/ContentEditor.tsx"
      provides: "Toast notification before navigation"
      contains: "toast.success"
  key_links:
    - from: "Auto-save useEffect"
      to: "setSaveState"
      via: "removed 50-char check"
      pattern: "if.*title.*bodyText.*length"
    - from: "onSubmit handler"
      to: "toast.success"
      via: "notification before router.push"
      pattern: "toast\\.success.*router\\.push"
---

<objective>
Fix UX gaps in ContentEditor: remove 50-char guard preventing early save indicator visibility, and add toast notification before navigation on successful submit.

Purpose: Improve user feedback clarity - users should see save state immediately when entering valid content, and see success confirmation before page transition.

Output: ContentEditor with improved save state visibility and toast notifications on submit.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Phase context
@.planning/phases/03-content-creation/03-03-SUMMARY.md
@.planning/phases/03-content-creation/03-UAT.md

# Files to modify
@src/components/content/ContentEditor.tsx
</context>

<tasks>

<task type="auto">
  <name>Fix save indicator visibility and add success toast</name>
  <files>src/components/content/ContentEditor.tsx</files>
  <action>
**Gap 1: Save indicator visibility (UAT test 4)**

Root cause: Line 81 has `bodyText.length < 50` check preventing save state from transitioning to 'saving' until 50+ characters entered.

Fix:
1. Line 81: Remove `|| bodyText.length < 50` from the guard condition
2. Keep the minimum length checks for title (5+ chars) to prevent saving incomplete forms
3. Result: Save indicator appears as soon as title (5+) and body meet minimum requirements, but save logic still validates 50+ chars

**Why this works:**
- Form validation still requires 50+ chars for submission (contentFormSchema)
- Save state UI feedback should appear immediately when user starts entering valid content
- Actual save operation happens in the setTimeout which already checks form validity

**Gap 4: Success message timing (UAT test 7)**

Root cause: Lines 119-123 call router.push() immediately without toast notification, causing instant redirect before user sees feedback.

Fix:
1. Import toast from react-hot-toast at top of file:
   ```typescript
   import toast from 'react-hot-toast'
   ```

2. In onSubmit handler (after line 122 `if (result.success)`), add:
   ```typescript
   toast.success('Content submitted for review successfully!')
   // Small delay to allow toast to be visible
   setTimeout(() => {
     router.push('/dashboard/content/list')
   }, 1500)
   ```

3. Update the else block (line 125) to use toast.error instead of alert:
   ```typescript
   } else {
     toast.error(result.error || 'Failed to submit content')
   }
   ```

**Why 1500ms delay:**
- react-hot-toast default display is ~2000ms
- 1500ms gives user time to see "submitted successfully" before navigation
- Feels responsive while providing clear feedback
</action>
  <verify>
```bash
# TypeScript compilation check
npx tsc --noEmit

# Visual verification steps (manual):
# 1. Start dev server: npm run dev
# 2. Navigate to /dashboard/content/create
# 3. Enter title "Test" (5+ chars)
# 4. Type in body - should see "Saving..." appear immediately (not wait for 50 chars)
# 5. Fill form completely, submit - should see green success toast for ~1.5s before redirect
```
</verify>
  <done>
- Save indicator appears when title is 5+ chars (no 50-char wait)
- Success toast displays for 1500ms before navigation to list page
- Error toast displays instead of alert on submission failure
- TypeScript compilation passes with no errors
</done>
</task>

</tasks>

<verification>
**Save indicator early visibility:**
1. Create new content
2. Enter title "Testing save indicator" (valid)
3. Type "This is a test" (14 chars, below 50)
4. Verify "Saving..." indicator appears immediately

**Success toast timing:**
1. Complete valid form with 50+ char body
2. Click "Submit for Review"
3. Verify green toast "Content submitted for review successfully!" appears
4. Verify navigation to list page happens after ~1.5 seconds
5. Verify no flash/instant redirect
</verification>

<success_criteria>
- UAT test 4 passes: Save indicator visible when entering valid content (no 50-char wait)
- UAT test 7 passes: Success message visible before navigation (toast notification pattern)
- No regression in auto-save functionality
- No regression in form validation
</success_criteria>

<output>
After completion, create `.planning/phases/03-content-creation/03-04-SUMMARY.md`
</output>
